# üìò Ejercicio 04: Lanzar un Programa Java desde Java

> **Autor:** Miguel √Ångel Ram√≠rez P√©rez (marp0604)  
> 
> **M√≥dulo:** Programaci√≥n de Servicios y Procesos (PSP)

---

## üìë √çndice

1. [Enunciado](#enunciado)
2. [C√≥digo Completo](#c√≥digo-completo)
3. [Explicaci√≥n Paso a Paso](#explicaci√≥n-paso-a-paso)
4. [Preparaci√≥n del Entorno](#preparaci√≥n-del-entorno)
5. [Casos de Prueba](#casos-de-prueba)
6. [Diagrama de Flujo](#diagrama-de-flujo)
7. [Errores Comunes](#errores-comunes)

---

## üéØ Enunciado

Crear un programa Java que ejecute el programa Java del ejercicio anterior (Ejercicio03).

### **Requisitos:**

1. ‚úÖ Aceptar 2 argumentos: directorio del script y nombre
2. ‚úÖ Ejecutar el `Ejercicio03.java` pas√°ndole esos argumentos
3. ‚úÖ Capturar y mostrar la salida del `Ejercicio03`
4. ‚úÖ Mostrar el c√≥digo de salida

**Cadena de ejecuci√≥n:**
```
Ejercicio04 ‚Üí Ejercicio03 ‚Üí saluda.sh
```

---

## üíª C√≥digo Completo

```java
package unidad01;

import java.io.BufferedReader;
import java.io.File;
import java.io.IOException;
import java.io.InputStreamReader;

/**
 * Ejecuta otro programa Java (Ejercicio03) desde Java.
 *
 * Este programa lanza el Ejercicio03 pas√°ndole los argumentos necesarios
 * para ejecutar el script de Bash.
 *
 * @author Miguel Angel Ramirez (marp0604)
 */
public class Ejercicio04 {

    /**
     * Nombre de la clase Java a ejecutar (con paquete completo).
     */
    private static final String CLASE_A_EJECUTAR = "unidad01.Ejercicio03";

    /**
     * M√©todo principal. Requiere 2 argumentos: directorio del script y nombre.
     *
     * @param args [0] = directorio del script, [1] = nombre para el script
     */
    public static void main(String[] args) {
        // Valida el n√∫mero de argumentos
        if (args.length != 2) {
            System.err.println("Error: N√∫mero incorrecto de argumentos.");
            System.exit(1);
        }

        String directorioScript = args[0];
        String nombre = args[1];

        try {
            ejecutarProgramaJava(directorioScript, nombre);
        } catch (IOException e) {
            System.err.println("Error de E/S: " + e.getMessage());
            System.exit(1);
        } catch (InterruptedException e) {
            System.err.println("Proceso interrumpido: " + e.getMessage());
            Thread.currentThread().interrupt();
            System.exit(1);
        }
    }

    /**
     * Ejecuta el programa Java Ejercicio03 con los par√°metros dados.
     *
     * Configura el directorio de trabajo, ejecuta el comando java,
     * captura la salida y muestra el c√≥digo de salida.
     *
     * @param directorioScript Directorio donde est√° el script de Bash
     * @param nombre Nombre a pasar al script como par√°metro
     * @throws IOException Si hay error de E/S al ejecutar el programa
     * @throws InterruptedException Si el proceso es interrumpido
     */
    private static void ejecutarProgramaJava(String directorioScript, String nombre)
            throws IOException, InterruptedException {

        // Muestra informaci√≥n inicial
        System.out.println("Ejecutar Programa Java");
        System.out.println("-------------------------------------");
        System.out.println();

        // Construye el comando para ejecutar el programa Java
        ProcessBuilder processBuilder = new ProcessBuilder(
                "java",                    // Comando Java
                CLASE_A_EJECUTAR,          // Clase a ejecutar (con paquete)
                directorioScript,          // Primer argumento para Ejercicio03
                nombre                     // Segundo argumento para Ejercicio03
        );

        // Determina el directorio de trabajo correcto
        File directorioActual = new File(System.getProperty("user.dir"));
        File directorioSrc = new File(directorioActual, "src");

        // L√≥gica de selecci√≥n del directorio de trabajo
        if (directorioActual.getName().equals("src")) {
            // Ya estamos en src/
            processBuilder.directory(directorioActual);
            System.out.println("Directorio de trabajo: " + directorioActual.getAbsolutePath());
        } else if (directorioSrc.exists() && directorioSrc.isDirectory()) {
            // Existe src/ como subdirectorio
            processBuilder.directory(directorioSrc);
            System.out.println("Directorio de trabajo: " + directorioSrc.getAbsolutePath());
        } else {
            // Usa el directorio actual
            processBuilder.directory(directorioActual);
            System.out.println("Directorio de trabajo: " + directorioActual.getAbsolutePath());
        }

        // Combina stdout y stderr en un solo stream
        processBuilder.redirectErrorStream(true);

        // Ejecuta el proceso
        Process proceso = processBuilder.start();

        System.out.println();
        System.out.println("Salida del programa Java:");
        System.out.println("-------------------------------------");

        // Captura y muestra la salida del proceso
        try (BufferedReader reader = new BufferedReader(
                new InputStreamReader(proceso.getInputStream()))) {

            String linea;
            while ((linea = reader.readLine()) != null) {
                System.out.println(linea);
            }
        }

        System.out.println("-------------------------------------");

        // Espera a que el proceso termine y obtener c√≥digo de salida
        int codigoSalida = proceso.waitFor();

        // Muestra el resultado final
        System.out.println();
        System.out.println("Resultado:");
        System.out.println("-------------------------------------");

        if (codigoSalida == 0) {
            System.out.println("Programa ejecutado correctamente");
            System.out.println("\tC√≥digo de salida: " + codigoSalida);
        } else {
            System.out.println("Programa termin√≥ con error");
            System.out.println("\tC√≥digo de salida: " + codigoSalida);
        }

        System.out.println("-------------------------------------");
    }
}
```

---

## üìñ Explicaci√≥n Paso a Paso

### **Paso 1: Constante de la clase a ejecutar**

```java
private static final String CLASE_A_EJECUTAR = "unidad01.Ejercicio03";
```

**¬øQu√© es?**
- Nombre completo de la clase Java a ejecutar (con paquete)
- **NO** incluye la extensi√≥n `.java`
- Equivalente a: `java unidad01.Ejercicio03`

**Ejemplos de errores:**
```java
"Ejercicio03.java"           // ‚ùå Con extensi√≥n
"Ejercicio03"                // ‚ùå Sin paquete
"unidad01.Ejercicio03.java"  // ‚ùå Con extensi√≥n
```

---

### **Paso 2: Validaci√≥n de argumentos**

```java
if (args.length != 2) {
    System.err.println("Error: N√∫mero incorrecto de argumentos.");
    System.exit(1);
}

String directorioScript = args[0];
String nombre = args[1];
```

**¬øQu√© hace?**
- Verifica que se pasaron exactamente 2 argumentos
- Si no, muestra error y termina con c√≥digo `1` (error)
- Guarda los argumentos en variables descriptivas

**Flujo de argumentos:**
```
java Ejercicio04 unidad01 Miguel
                 ^^^^^^^^ ^^^^^^
                 args[0]  args[1]
                    ‚Üì        ‚Üì
java unidad01.Ejercicio03 unidad01 Miguel
```

---

### **Paso 3: Manejo de excepciones**

```java
try {
    ejecutarProgramaJava(directorioScript, nombre);
} catch (IOException e) {
    System.err.println("Error de E/S: " + e.getMessage());
    System.exit(1);
} catch (InterruptedException e) {
    System.err.println("Proceso interrumpido: " + e.getMessage());
    Thread.currentThread().interrupt();
    System.exit(1);
}
```

**Tipos de excepciones:**

| Excepci√≥n | Cu√°ndo ocurre |
|-----------|---------------|
| `IOException` | Error al iniciar el proceso o leer su salida |
| `InterruptedException` | El proceso es interrumpido (Ctrl+C) |

**¬øPor qu√© `Thread.currentThread().interrupt()`?**
- Restaura el flag de interrupci√≥n del hilo
- Buena pr√°ctica cuando se captura `InterruptedException`

---

### **Paso 4: Construcci√≥n del comando**

```java
ProcessBuilder processBuilder = new ProcessBuilder(
    "java",                    // Comando Java
    CLASE_A_EJECUTAR,          // Clase a ejecutar
    directorioScript,          // Argumento 1 para Ejercicio03
    nombre                     // Argumento 2 para Ejercicio03
);
```

**¬øQu√© construye?**

Equivale a ejecutar en terminal:
```bash
java unidad01.Ejercicio03 unidad01 Miguel
```

**Desglose:**
- `"java"`: El ejecutable de Java
- `CLASE_A_EJECUTAR`: La clase a ejecutar (con paquete)
- `directorioScript`: Se pasa como `args[0]` al Ejercicio03
- `nombre`: Se pasa como `args[1]` al Ejercicio03

---

### **Paso 5: Configuraci√≥n del directorio de trabajo**

```java
File directorioActual = new File(System.getProperty("user.dir"));
File directorioSrc = new File(directorioActual, "src");

if (directorioActual.getName().equals("src")) {
    processBuilder.directory(directorioActual);
} else if (directorioSrc.exists() && directorioSrc.isDirectory()) {
    processBuilder.directory(directorioSrc);
} else {
    processBuilder.directory(directorioActual);
}
```

**¬øPor qu√© es importante?**

Java busca las clases desde el directorio actual. La l√≥gica es:

1. **Si ya estamos en `src/`**: Usar ese directorio
2. **Si existe `src/` como subdirectorio**: Usarlo
3. **Si no**: Usar el directorio actual

**Ejemplo:**
```
Sin directory():
  Busca en: /home/marp0604/IdeaProjects/PSP/
  ‚ùå Error: Could not find or load main class

Con directory(src):
  Busca en: /home/marp0604/IdeaProjects/PSP/src/
  ‚úÖ Encuentra: unidad01/Ejercicio03.class
```

---

### **Paso 6: Combinar streams de salida**

```java
processBuilder.redirectErrorStream(true);
```

**¬øQu√© hace?**
- Combina stdout (salida normal) y stderr (errores)
- Simplifica la lectura: solo necesitas leer un stream

**Sin esto:**
```java
// Tendr√≠as que leer dos streams
InputStream stdout = proceso.getInputStream();
InputStream stderr = proceso.getErrorStream();
```

---

### **Paso 7: Ejecutar el proceso**

```java
Process proceso = processBuilder.start();
```

**¬øQu√© ocurre?**
1. El sistema operativo crea un nuevo proceso
2. Ejecuta: `java unidad01.Ejercicio03 unidad01 Miguel`
3. El m√©todo devuelve **inmediatamente** (no espera)

---

### **Paso 8: Capturar la salida**

```java
try (BufferedReader reader = new BufferedReader(
        new InputStreamReader(proceso.getInputStream()))) {

    String linea;
    while ((linea = reader.readLine()) != null) {
        System.out.println(linea);
    }
}
```

**¬øQu√© hace?**
1. `try-with-resources`: Cierra autom√°ticamente el `BufferedReader`
2. Lee l√≠nea por l√≠nea la salida del `Ejercicio03`
3. Muestra cada l√≠nea por consola

**¬øQu√© captura?**
- Toda la salida del `Ejercicio03`
- Que incluye la salida del script `saluda.sh`

---

### **Paso 9: Esperar y verificar c√≥digo de salida**

```java
int codigoSalida = proceso.waitFor();

if (codigoSalida == 0) {
    System.out.println("Programa ejecutado correctamente");
    System.out.println("\tC√≥digo de salida: " + codigoSalida);
} else {
    System.out.println("Programa termin√≥ con error");
    System.out.println("\tC√≥digo de salida: " + codigoSalida);
}
```

**`waitFor()`:**
- Bloquea el hilo actual
- Espera hasta que el proceso termine
- Devuelve el c√≥digo de salida

**C√≥digos de salida:**
- `0` = √âxito
- `1` u otro = Error

---

## üõ†Ô∏è Preparaci√≥n del Entorno

### **1. Estructura de archivos necesaria**

```
PSP/
‚îî‚îÄ‚îÄ src/
    ‚îî‚îÄ‚îÄ unidad01/
        ‚îú‚îÄ‚îÄ Ejercicio03.java
        ‚îú‚îÄ‚îÄ Ejercicio03.class  ‚Üê Debe estar compilado
        ‚îú‚îÄ‚îÄ Ejercicio04.java
        ‚îú‚îÄ‚îÄ Ejercicio04.class  ‚Üê Debe estar compilado
        ‚îî‚îÄ‚îÄ saluda.sh          ‚Üê Con permisos de ejecuci√≥n
```

### **2. Compilar los ejercicios**

```bash
cd ~/IdeaProjects/PSP/src

# Compilar Ejercicio03
javac unidad01/Ejercicio03.java

# Compilar Ejercicio04
javac unidad01/Ejercicio04.java

# Verificar que se crearon los .class
ls -la unidad01/Ejercicio03.class
ls -la unidad01/Ejercicio04.class
```

### **3. Verificar el script**

```bash
# Verificar que existe
ls -la unidad01/saluda.sh

# Verificar permisos de ejecuci√≥n
# Debe mostrar: -rwxr-xr-x
ls -l unidad01/saluda.sh

# Si no tiene permisos, a√±adirlos
chmod +x unidad01/saluda.sh

# Probar el script
./unidad01/saluda.sh Miguel
```

---

## üß™ Casos de Prueba

### ‚úÖ **Caso 1: Ejecuci√≥n exitosa**

**Ejecutar:**
```bash
cd ~/IdeaProjects/PSP/src
java unidad01.Ejercicio04 unidad01 Miguel
```

**Salida esperada:**
```
Ejecutar Programa Java
-------------------------------------

Directorio de trabajo: /home/marp0604/IdeaProjects/PSP/src

Salida del programa Java:
-------------------------------------
Salida del script: 
¬°Hola, Miguel! Este mensaje viene del script de Bash.
La fecha de hoy es: 2025-10-09
---------------------------------------

Resultado de la ejecuci√≥n:
Script ejecutado correctamente
	C√≥digo de salida: 0
---------------------------------------
-------------------------------------

Resultado:
-------------------------------------
Programa ejecutado correctamente
	C√≥digo de salida: 0
-------------------------------------
```

---

### ‚ùå **Caso 2: Sin argumentos**

**Ejecutar:**
```bash
java unidad01.Ejercicio04
```

**Salida esperada:**
```
Error: N√∫mero incorrecto de argumentos.
```

**C√≥digo de salida:** `1`

---

### ‚ùå **Caso 3: Solo un argumento**

**Ejecutar:**
```bash
java unidad01.Ejercicio04 unidad01
```

**Salida esperada:**
```
Error: N√∫mero incorrecto de argumentos.
```

---

### ‚ùå **Caso 4: Directorio no existe**

**Ejecutar:**
```bash
java unidad01.Ejercicio04 directorio_inexistente Miguel
```

**Salida esperada:**
```
Ejecutar Programa Java
-------------------------------------

Directorio de trabajo: /home/marp0604/IdeaProjects/PSP/src

Salida del programa Java:
-------------------------------------
Error. El directorio: directorio_inexistente no existe.
-------------------------------------

Resultado:
-------------------------------------
Programa termin√≥ con error
	C√≥digo de salida: 1
-------------------------------------
```

---

### ‚ùå **Caso 5: Ejercicio03 no compilado**

**Preparaci√≥n:**
```bash
rm src/unidad01/Ejercicio03.class
```

**Ejecutar:**
```bash
java unidad01.Ejercicio04 unidad01 Miguel
```

**Salida esperada:**
```
Ejecutar Programa Java
-------------------------------------

Directorio de trabajo: /home/marp0604/IdeaProjects/PSP/src

Salida del programa Java:
-------------------------------------
Error: Could not find or load main class unidad01.Ejercicio03
Caused by: java.lang.ClassNotFoundException: unidad01.Ejercicio03
-------------------------------------

Resultado:
-------------------------------------
Programa termin√≥ con error
	C√≥digo de salida: 1
-------------------------------------
```

**Soluci√≥n:**
```bash
javac unidad01/Ejercicio03.java
```

---

## üéØ Diagrama de Flujo

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Usuario ejecuta:                        ‚îÇ
‚îÇ java Ejercicio04 unidad01 Miguel        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚îÇ
              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Ejercicio04 valida argumentos           ‚îÇ
‚îÇ ‚úì Verifica que sean 2 argumentos        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚îÇ
              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Ejercicio04 construye comando:          ‚îÇ
‚îÇ "java unidad01.Ejercicio03 unidad01     ‚îÇ
‚îÇ  Miguel"                                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚îÇ
              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Configura directorio de trabajo         ‚îÇ
‚îÇ ‚Üí Busca directorio src/                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚îÇ
              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Ejecuta Ejercicio03 con:                ‚îÇ
‚îÇ args[0] = "unidad01"                    ‚îÇ
‚îÇ args[1] = "Miguel"                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚îÇ
              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Ejercicio03 valida y ejecuta script     ‚îÇ
‚îÇ ‚Üí Directorio: unidad01/                 ‚îÇ
‚îÇ ‚Üí Script: saluda.sh                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚îÇ
              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Script saluda.sh ejecuta:               ‚îÇ
‚îÇ "¬°Hola, Miguel! ..."                    ‚îÇ
‚îÇ Devuelve: exit 0                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚îÇ
              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Ejercicio03 muestra salida:             ‚îÇ
‚îÇ "Script ejecutado correctamente"        ‚îÇ
‚îÇ Devuelve: exit 0                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚îÇ
              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Ejercicio04 captura y muestra todo:     ‚îÇ
‚îÇ "Programa ejecutado correctamente"      ‚îÇ
‚îÇ C√≥digo de salida: 0                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## ‚ö†Ô∏è Errores Comunes

### **Error 1: Usar `.java` en el nombre de clase**

```java
// ‚ùå INCORRECTO
private static final String CLASE_A_EJECUTAR = "unidad01.Ejercicio03.java";

// ‚úÖ CORRECTO
private static final String CLASE_A_EJECUTAR = "unidad01.Ejercicio03";
```

---

### **Error 2: Olvidar el paquete**

```java
// ‚ùå INCORRECTO
private static final String CLASE_A_EJECUTAR = "Ejercicio03";

// ‚úÖ CORRECTO
private static final String CLASE_A_EJECUTAR = "unidad01.Ejercicio03";
```

---

### **Error 3: No establecer directorio de trabajo**

```java
// ‚ùå INCORRECTO
ProcessBuilder pb = new ProcessBuilder("java", "unidad01.Ejercicio03", ...);
// Sin directory()

// ‚úÖ CORRECTO
ProcessBuilder pb = new ProcessBuilder("java", "unidad01.Ejercicio03", ...);
pb.directory(directorioSrc);
```

---

### **Error 4: Pasar argumentos incorrectos**

```bash
# ‚ùå INCORRECTO (desde src/)
java unidad01.Ejercicio04 src/unidad01 Miguel
# Buscar√≠a: .../src/src/unidad01 (no existe)

# ‚úÖ CORRECTO
java unidad01.Ejercicio04 unidad01 Miguel
# Busca: .../src/unidad01 (existe)
```

---

### **Error 5: No compilar antes de ejecutar**

```bash
# ‚ùå Orden incorrecto
javac unidad01/Ejercicio04.java
java unidad01.Ejercicio04 unidad01 Miguel
# Error: Ejercicio03 no encontrado

# ‚úÖ Orden correcto
javac unidad01/Ejercicio03.java  # Primero el que se ejecutar√°
javac unidad01/Ejercicio04.java  # Luego el lanzador
java unidad01.Ejercicio04 unidad01 Miguel
```

---

## üîë Conceptos Clave

### **1. Ejecutar Java desde Java**

```java
ProcessBuilder pb = new ProcessBuilder(
    "java",              // Comando
    "paquete.Clase",     // Clase con paquete
    "arg1", "arg2"      // Argumentos
);
```

---

### **2. Importancia del directorio de trabajo**

El directorio de trabajo determina **desde d√≥nde** Java busca las clases:

```
Directorio actual: /home/marp0604/IdeaProjects/PSP/src/
Comando:           java unidad01.Ejercicio03
Busca en:          /home/marp0604/IdeaProjects/PSP/src/unidad01/Ejercicio03.class
```

---

### **3. Propagaci√≥n de c√≥digos de salida**

Los c√≥digos de salida se propagan desde el nivel m√°s bajo:

```
saluda.sh       ‚Üí exit 0
    ‚Üì
Ejercicio03     ‚Üí System.exit(0) impl√≠cito
    ‚Üì
Ejercicio04     ‚Üí captura 0
```

---

### **4. Nombre de clase vs archivo**

| Elemento | Para compilar | Para ejecutar |
|----------|---------------|---------------|
| **Archivo** | `Ejercicio03.java` | - |
| **Clase compilada** | - | `unidad01.Ejercicio03` |
| **Extensi√≥n** | `.java` | Sin extensi√≥n |

---

## üìä Comparaci√≥n con Ejercicio03

| Aspecto | Ejercicio03 | Ejercicio04 |
|---------|-------------|-------------|
| **Ejecuta** | Script Bash | Programa Java |
| **Comando** | Ruta del script | `java` + clase |
| **Argumentos** | Directorio + nombre | Los mismos |
| **Salida** | Del script | Del Ejercicio03 |
| **Directory** | Dir. del script | Dir. `src/` |

---

**Autor:** Miguel √Ångel Ram√≠rez P√©rez (marp0604)  
**Repositorio:** [PSP_2DAM](https://github.com/marp0604/PSP_2DAM)